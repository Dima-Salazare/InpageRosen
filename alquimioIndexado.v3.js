(async()=>{const t=document.querySelector('script[src*="alquimioIndexado.v3"]');let e=t.getAttribute("data-env");const a=async(t,e=0)=>0===e?["rosen.cl"].find((e=>t.toLowerCase().indexOf(e)>-1)):["rosen.cl"].find((e=>t.toLowerCase().indexOf(e)>-1));let o=!0;const n=t.getAttribute("data-retail")||document.location.hostname;o=!await a(n);let l=!!await a(n,1);const c=document.location.href,s=t.dataset;let i=[];Object.keys(s).forEach((t=>{const e={key:t,value:s[t]};i.push(e)}));let r={filter:i,retail:n,fullRetail:c};const u=async t=>{const a=await fetch(`${function(){switch(e){case"production":default:hostApi="https://oc-cache.production.alquimio.cloud/scriptManagement";break;case"staging":hostApi="https://orchestrator.staging.aks.alquimio.cloud/scriptManagement";break;case"local":hostApi="http://localhost:3001/scriptManagement"}return hostApi}()}/get`,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)});return a.status>=200&&a.status<300?a.json():new Error},d=async t=>{try{t&&t.data.features&&Array.isArray(t.data.features)&&t.data.features.forEach((t=>{let e="";const a=document.createElement("script");if(a.src=t.urlScript,t.metadata&&Array.isArray(t.metadata)&&t.metadata.forEach((t=>{a.dataset[t.key]=t.value})),"INDEXADO"===t.id&&(a.async=!0),e=document.querySelector(`script[src*="${t.urlScript}"]`),e&&(o&&console.log("removiendo:::",t.urlScript),l||e.remove(),"INDEXADO"===t.id)){const t=document.getElementById("contenidoIndexado");let e=t.children;if(e&&e.length>0)for(let a=0;a<e.length;a++)"SCRIPT"!==e[a].tagName&&t.removeChild(e[a])}document.head.appendChild(a)}))}catch(t){o&&console.log("Hotspots (processResponse) ---\x3e 005")}};let h=0;0===Object.keys(s).length&&(h=1,r={...r,onlyDefaultScripts:h}),window.PMBox={loadContentById:async function(t,e,a=!0,o=null){const n=document.location.hostname,l=document.location.href;let c=[{key:"modelId",value:t}];e&&c.push({key:"lang",value:e});let s={filter:c,retail:n,fullRetail:l};1===h&&(s={...s,onlyDefaultScripts:2});const i=await u(s);await d(i)},loadContentBySku:async function(t,e,a=!0,o=null){const n=document.location.hostname,l=document.location.href;let c=[{key:"sku",value:t}];e&&c.push({key:"lang",value:e});let s={filter:c,retail:n,fullRetail:l};1===h&&(s={...s,onlyDefaultScripts:2});const i=await u(s);await d(i)},loadContentByEan:async function(t,e,a=!0,o=null){const n=document.location.hostname,l=document.location.href;let c=[{key:"ean",value:t}];e&&c.push({key:"lang",value:e});let s={filter:c,retail:n,fullRetail:l};1===h&&(s={...s,onlyDefaultScripts:2});const i=await u(s);await d(i)}};const f=await u(r);await d(f)})();
